# Введение | API Яндекс Метрики

Request

## В этой статье:

  1. [API отчетов](../index.md)
  2. Справочник API отчетов
  3. Получение данных по времени

# Получение данных по времени

Позволяет получить данные с разбивкой по времени (например, по дням, неделям, месяцам). Используйте данный тип запроса для построения графиков и отслеживания динамики. Посмотрите как используется данный запрос в [примере](../examples.md).

## [](ru/stat/openapi/bytime#request)Request

GET
    
    
    https://api-metrika.yandex.net/stat/v1/data/bytime
    

### [](ru/stat/openapi/bytime#query-parameters)Query parameters

**Name** |  **Description**  
---|---  
ids* |  **Type:** integer<int32>[] Идентификаторы счетчиков, через запятую.  
Example: `44147844,2215573`  
metrics* |  **Type:** string Список метрик, разделенных запятой. Лимит: 20 метрик в запросе.  
Example: `ym:s:pageviews`  
accuracy |  **Type:** string Размер выборки, используемой для отчета. Позволяет управлять [семплированием](../sampling.md) (количеством визитов, использованных при расчете итогового значения).  
annotation_groups |  **Type:** string Группы примечаний, разделенные запятой, которые должны вернуться в ответе. Передается, если параметр include_annotations принимает значение true Если параметр annotation_groups не указан, в ответе вернутся все примечания, созданные для счетчика. A — группа A.B — группа B.C — группа C.D — группа D.E — группа E.HOLIDAY — государственные праздники. Отображаются, если Яндекс Метрике удалось определить регион счетчика.   
callback |  **Type:** string Функция обратного вызова, которая обрабатывает ответ API.  
date1 |  **Type:** string Дата начала периода выборки в формате YYYY-MM-DD. Также используйте значения: `today`, `yesterday`, `ndaysAgo`.  
_Default:_ `6daysAgo`  
date2 |  **Type:** string Дата окончания периода выборки в формате YYYY-MM-DD. Также используйте значения: `today`, `yesterday`, `ndaysAgo`.  
_Default:_ `today`  
dimensions |  **Type:** string Список группировок, разделенных запятой. Лимит: 10 группировок в запросе.  
Example: `ym:s:trafficSource`  
direct_client_logins |  **Type:** string[] Логины клиентов Яндекс Директа, через запятую. Могут использоваться для формирования отчета [Директ-расходы](../direct-clicks.md).  
Example: `login1,login2`  
filters |  **Type:** string Фильтр [сегментации](../segmentation.md). Лимит: количество уникальных группировок и метрик — до 10, количество отдельных фильтров — до 20, длина строки в фильтре — до 10 000 символов; количество значений в одном условии фильтрации — 100.  
group |  **Type:** string Группировка данных по времени:

  * all — временной интервал не разбивается.
  * auto — интервал устанавливается с учетом выбранного отчетного периода и количества данных, достаточного для этого периода;
  * minutes — временной интервал разбивается на интервалы из некоторого количества минут. Возможные интервалы minutes: 1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30, 60, 120, 180, 240, 360, 480, 720, 1440. Расчеты оптимизированы так, чтобы между точками на графике не было больше одного интервала, с лимитом в 1600 точек для минут;
  * dekaminute — временной интервал разбивается на 10-минутные интервалы;
  * minute — временной интервал разбивается на минутные интервалы;
  * hour — временной интервал разбивается на часовые интервалы;
  * hours — временной интервал разбивается на интервалы из нескольких часов. Возможные интервалы hours: 1, 2, 3, 4, 6, 8, 12, 24. Расчеты оптимизированы так, чтобы между точками на графике не было больше одного интервала, с лимитом в 30 точек для часов;
  * day — временной интервал разбивается по дням;
  * week — временной интервал разбивается по неделям;
  * month — временной интервал разбивается по месяцам;
  * quarter — временной интервал разбивается по кварталам;
  * year — временной интервал разбивается по годам.

_Default:_ `week`  
include_annotations |  **Type:** string Признак включения в ответ примечания. По умолчанию выключено.  
_Default:_ `false`  
include_undefined |  **Type:** boolean Включает в ответ строки, для которых значения группировок не определены. Влияет только на первую группировку. По умолчанию выключено.  
keys_sort |  **Type:** string Список группировок и метрик, разделенных запятой, по которым осуществляется сортировка. По умолчанию сортировка производится по убыванию (указан знак `-` перед группировкой или метрикой). Чтобы отсортировать данные по возрастанию, удалите знак `-`.  
lang |  **Type:** string Язык.  
preset |  **Type:** string [Шаблон отчета](../presets.md).  
Example: `sources_summary`  
pretty |  **Type:** string Задает форматирование результата. Чтобы использовать форматирование, укажите значение `true`.  
_Default:_ `false`  
proposed_accuracy |  **Type:** boolean Если параметр выставлен в `true`, API имеет право автоматически увеличивать accuracy до рекомендованного значения.Когда идет запрос в маленькую таблицу с очень маленьким семплингом, параметр поможет получить осмысленные результаты.  
row_ids |  **Type:** string[][] Выбор строк для построения графиков. Содержит перечисление списков ключей.  
timezone |  **Type:** string Часовой пояс в формате ±hh:mm в диапазоне [-23:59; +23:59] (знак плюса нужно нужно передавать как `%2B`), в котором будут рассчитан период выборки запроса, а также связанные с датой и временем группировки. По умолчанию используется часовой пояс счетчика.  
Example: `-01:30, -01:00, -00:00, +00:00, +01:00, +01:30`  
top_keys |  **Type:** string Задает количество строк результата, если не указан параметр row_ids. Максимальное количество строк: 30.  
_Default:_ `7` _Min value:_ `0`  
  
## [](ru/stat/openapi/bytime#responses)Responses

## [](ru/stat/openapi/bytime#200-ok)200 OK

OK

### [](ru/stat/openapi/bytime#body)Body

application/json
    
    
    {
        "query": {
            "timezone": "string",
            "preset": "string",
            "dimensions": [
                "string"
            ],
            "metrics": [
                "string"
            ],
            "sort": [
                "string"
            ],
            "date1": "string",
            "date2": "string",
            "filters": "string"
        },
        "data": [
            {
                "dimensions": [
                    "string"
                ],
                "metrics": [
                    [
                        0
                    ]
                ]
            }
        ],
        "total_rows": 0,
        "total_rows_rounded": false,
        "sampled": false,
        "contains_sensitive_data": false,
        "sample_share": 0,
        "sample_size": 0,
        "sample_space": 0,
        "data_lag": 0,
        "totals": [
            [
                0
            ]
        ],
        "annotations": [
            [
                {
                    "id": 0,
                    "date": "string",
                    "time": "string",
                    "title": "string",
                    "message": "string",
                    "group": "string"
                }
            ]
        ]
    }
    

**Name** |  **Description**  
---|---  
annotations |  **Type:** [MetrikaReportChartAnnotation](bytime.md)[][] Примечания.  
  
contains_sensitive_data |  **Type:** boolean Признак возможного отсутствия [конфиденциальных данных](https://yandex.../../support/metrica/reports/report-general.md) в ответе. К ним относятся данные, которые рассчитываются алгоритмами Яндекса, например, социально-демографические (пол, возраст и др.), адреса страниц входа, поисковые фразы, информация о роботах. При значении `true` в ответе не отобразятся такие данные, если выборка составляет меньше 10 посетителей. Возможные значения: `true`, `false`.  
data |  **Type:** [DynamicRow](bytime.md)[] Строки ответа. Представляет собой массив, каждый элемент которого — одна строка результата.  
data_lag |  **Type:** integer<int32> Задержка в обновлении данных, в секундах.  
query |  **Type:** [DynamicQueryExternal](bytime.md) Исходный запрос. Содержит параметры запроса, включая развернутые параметры из шаблона и параметры для схемы параметризации атрибутов.  
sample_share |  **Type:** number<double> Доля данных, по которым осуществлялся расчет. Доступно значение в пределах от 0 до 1.  
sample_size |  **Type:** integer<int64> Количество строк в выборке данных.  
sample_space |  **Type:** integer<int64> Количество строк данных.  
sampled |  **Type:** boolean Признак семплирования. Показывает, был ли применен семплинг. Возможные значения: `true`, `false`.  
total_rows |  **Type:** integer<int64> Общее количество строк в ответе по всему множеству данных (с учетом фильтра).  
total_rows_rounded |  **Type:** boolean Признак того, что общее количество строк было округлено.  
totals |  **Type:** number<double>[][] Общие результаты для метрик по всему множеству данных (с учетом фильтра).  
  
  
### [](ru/stat/openapi/bytime#metrikareportchartannotation)MetrikaReportChartAnnotation

**Name** |  **Description**  
---|---  
date |  **Type:** string<date> Дата.  
group |  **Type:** string Группа:A — группа A.B — группа B.C — группа C.D — группа D.E — группа E.HOLIDAY — государственные праздники. Отображаются, если Яндекс Метрике удалось определить регион счетчика.   
id |  **Type:** integer<int32> Идентификатор примечания.  
message |  **Type:** string Описание.  
time |  **Type:** string<time> Время.  
title |  **Type:** string Заголовок.  
  
### [](ru/stat/openapi/bytime#dynamicrow)DynamicRow

Строки ответа. Представляет собой массив, каждый элемент которого — одна строка результата.

**Name** |  **Description**  
---|---  
dimensions |  **Type:** string[] Массив значений группировок для данной строки. Каждое из значений группировки представляет собой объект. В нем обязательно присутствует поле `name` — текстовое значение, но могут присутствовать дополнительные поля, например идентификатор — `id`.  
  
metrics |  **Type:** number<double>[][] Массив массивов значений метрик для данной строки. Внешний массив перечисляет метрики, внутренние массивы — значения конкретной метрики для каждой временной группы.  
  
  
### [](ru/stat/openapi/bytime#dynamicqueryexternal)DynamicQueryExternal

Исходный запрос. Содержит параметры запроса, включая развернутые параметры из шаблона и параметры для схемы параметризации атрибутов.

**Name** |  **Description**  
---|---  
date1 |  **Type:** string Дата начала периода выборки в формате YYYY-MM-DD.  
date2 |  **Type:** string Дата окончания периода выборки в формате YYYY-MM-DD.  
dimensions |  **Type:** string[] Массив группировок.  
filters |  **Type:** string Фильтр сегментации.  
metrics |  **Type:** string[] Массив метрик.  
preset |  **Type:** string Пресет отчета.  
sort |  **Type:** string[] Массив сортировок.  
timezone |  **Type:** string Часовой пояс периода выборки в формате ±hh:mm.  
  
No longer supported, please use an alternative and newer version.

### Была ли статья полезна?

ДаНет

Предыдущая

[Сравнение - drill down](comparison_drilldown.md)

Следующая

[Введение](../../logs/index.md)